<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Test</title>
  <style>
    *,*::before,*::after{box-sizing:border-box}
    :root{
      --brand:#d80000; --ink:#121212; --muted:#6b6b6b; --card:#fff;
      --radius-xl:22px; --radius-lg:16px;
      --shadow-lg:0 30px 80px rgba(0,0,0,.22); --shadow-md:0 12px 28px rgba(0,0,0,.14);
    }
    html,body{margin:0;padding:0;background:#f7f7f7;font-family:system-ui,Arial,sans-serif;color:#111}

    /* --- Sizdagi blok (o'zgarmagan) --- */
    .container{max-width:1300px;margin:0 auto;position:relative}
    .blok-wrap{width:1300px;transform-origin:top center;transition:transform .2s ease-out}
    .blok{position:relative;width:100%;overflow:hidden}
    .blok img{display:block;width:100%;height:auto}
    .cta-btn{
      position:absolute;left:58%;top:70%;transform:translate(-50%,-50%);
      background:var(--brand);color:#fff;font-size:16px;font-weight:700;
      text-decoration:none;padding:20px 70px;border-radius:20px;transition:transform .2s,filter .2s;
      box-shadow:0 4px 12px rgba(0,0,0,.15);white-space:nowrap;z-index:2
    }
    .cta-btn:hover{transform:translate(-50%,-50%) scale(1.04)}
    .blok .mobile{display:none}
    @media (max-width:1024px){
      .container{max-width:100%}.blok-wrap{width:100%}.blok{overflow:visible}
      .blok .desktop{display:none}.blok .mobile{display:block}
      .cta-btn{left:50%;bottom:8%;top:auto;transform:translateX(-50%);font-size:18px;padding:24px 80px}
      .cta-btn:hover{transform:translateX(-50%) scale(1.04)}
    }

    /* --- Modal / Sheet (o'zgarmagan) --- */
    .overlay{position:fixed;inset:0;background:radial-gradient(80% 60% at 50% 10%,rgba(0,0,0,.4),rgba(0,0,0,.6));
      backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);display:none;z-index:9999;padding:24px}
    .overlay.active{display:grid;place-items:center}
    .card{width:min(92vw,560px);background:var(--card);border-radius:var(--radius-xl);
      box-shadow:var(--shadow-lg);overflow:hidden;transform:translateY(8px) scale(.98);opacity:0;transition:transform .22s,opacity .22s}
    .overlay.active .card{transform:translateY(0) scale(1);opacity:1}
    .card__brandbar{background:linear-gradient(90deg,#ff5858,var(--brand));height:10px;width:100%}

    .card__head{display:flex;align-items:center;justify-content:flex-end;padding:18px 18px 6px}
    .xbtn{width:36px;height:36px;border-radius:12px;border:1px solid #eee;background:#fff;cursor:pointer;display:grid;place-items:center;box-shadow:0 4px 12px rgba(0,0,0,.06)}
    .xbtn:hover{background:#f7f7f7}

    /* >>> KATTA markaziy chip (qoldi) <<< */
    .chip-wrap{display:flex;justify-content:center}
    .chip-big{
      display:inline-flex;align-items:center;gap:10px;
      border:1.5px dashed rgba(216,0,0,.5);
      background:rgba(216,0,0,.08);
      color:#a10000;font-weight:900;letter-spacing:.25px;
      padding:10px 16px;border-radius:999px;font-size:16px;
      margin:8px 18px 6px;
    }

    .title{margin:4px 18px 0;font-size:24px;font-weight:900;color:var(--ink)}
    .subtitle{margin:6px 18px 16px;color:var(--muted);font-size:14px}

    .form{padding:0 18px 18px;display:grid;gap:14px}
    .field{background:#fff;border:1px solid #ececec;border-radius:var(--radius-lg);box-shadow:var(--shadow-md);padding:12px}
    .field__label{display:block;font-size:12px;letter-spacing:.2px;color:#8a8a8a;margin:2px 4px 6px;font-weight:700;text-transform:uppercase}
    .field__input{width:100%;height:46px;border:1px solid #e6e6e6;border-radius:12px;outline:none;padding:0 14px;font-size:16px;transition:border-color .18s,box-shadow .18s;background:#fff}
    .field__input:focus{border-color:var(--brand);box-shadow:0 0 0 4px rgba(216,0,0,.1)}

    .form__submit{margin-top:4px;height:56px;border:0;border-radius:16px;background:var(--brand);color:#fff;font-weight:900;font-size:16px;cursor:pointer;box-shadow:0 14px 30px rgba(216,0,0,.3);transition:transform .06s,filter .2s;width:100%}
    .form__submit:hover{filter:brightness(1.02)} .form__submit:active{transform:translateY(1px)} .form__submit:disabled{filter:grayscale(1) opacity(.7);cursor:not-allowed}
    .footnote{text-align:center;color:#8a8a8a;font-size:12px;margin-top:2px}

    /* Yuborildi holati (kartochka ichida ko'rsatamiz) */
    .successbox{display:none; padding:24px 18px 26px; text-align:center}
    .successbox.active{display:block}
    .successbox .ok{font-size:44px; line-height:1; margin-bottom:8px}
    .successbox .txt{font-size:18px; font-weight:700; color:#111}

    @media (max-width:640px){
      .overlay{align-items:end}
      .card{width:100%;border-radius:18px 18px 0 0;transform:translateY(12px);opacity:0}
      .overlay.active .card{transform:translateY(0);opacity:1}
      .card__head{padding:14px 14px 6px}
      .chip-big{margin:8px 14px 6px}
      .title{margin-left:14px;margin-right:14px;font-size:22px}
      .subtitle{margin-left:14px;margin-right:14px}
      .form{padding:0 14px 14px}
    }
  </style>
</head>
<body>
  <!-- Sahifa -->
  <div class="container">
    <div class="blok-wrap" id="blok-wrap">
      <div class="blok">
        <img class="desktop" src="https://static.tildacdn.com/tild3664-3630-4036-b439-313633653334/Umida_Abdullaeva_24.png" alt="Desktop Rasm">
        <img class="mobile"  src="https://static.tildacdn.com/tild3063-6638-4135-b262-623761393562/Umida_Abdullaeva_mob.png" alt="Mobil Rasm">
        <a href="#" class="cta-btn" id="openModal">Ro‘yxatdan o‘tish</a>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="card" role="dialog" aria-modal="true" aria-labelledby="formTitle">
      <div class="card__brandbar"></div>
      <div class="card__head">
        <button class="xbtn" id="closeModal" aria-label="Yopish">✕</button>
      </div>

      <h2 class="title" id="formTitle" style="text-align:center; background:none; color:#000; margin-bottom:14px;">Ro‘yxatdan o‘tish</h2>

      <!-- Forma -->
      <form id="regForm" class="form" novalidate>
        <div class="field">
          <label class="field__label" for="name">ISM</label>
          <input class="field__input" id="name" name="name" type="text" placeholder="Ismingiz" autocomplete="name" required />
        </div>

        <div class="field">
          <label class="field__label" for="phone">TELEFON</label>
          <!-- MUHIM: inputga maxlength va autocomplete qo'shildi -->
          <input class="field__input" id="phone" name="phone" type="tel"
                 placeholder="+998 __ ___ __ __" inputmode="tel" autocomplete="tel"
                 maxlength="19" required />
        </div>

        <button type="submit" class="form__submit" id="submitBtn" disabled>Yuborish</button>
        <div class="footnote">Ma’lumotlaringiz maxfiy saqlanadi.</div>
      </form>

      <!-- Yuborildi holati -->
      <div class="successbox" id="successBox" aria-live="polite">
        <div class="ok">✅</div>
        <div class="txt">Ma’lumotlaringiz yuborildi!</div>
      </div>
    </div>
  </div>

  <script>
    /* Autoscale (sizning kod) */
    function autoscaleBlock(){
      const baseWidth=1300,w=window.innerWidth,blokWrap=document.getElementById('blok-wrap');
      if(w>=1024){const z=w/baseWidth;blokWrap.style.transform=`scale(${z})`;blokWrap.style.width=baseWidth+'px';}
      else{blokWrap.style.transform='none';blokWrap.style.width='100%';}
    }
    window.addEventListener('resize',autoscaleBlock);
    window.addEventListener('load',autoscaleBlock);

    /* Modal interaktivligi (o'zgarmagan) */
    const overlay=document.getElementById('overlay');
    const openModal=document.getElementById('openModal');
    const closeModal=document.getElementById('closeModal');

    function openSheet(e){if(e)e.preventDefault();overlay.classList.add('active');overlay.setAttribute('aria-hidden','false');document.body.style.overflow='hidden';setTimeout(()=>nameInput.focus(),80);}
    function closeSheet(){overlay.classList.remove('active');overlay.setAttribute('aria-hidden','true');document.body.style.overflow='';openModal.focus();}

    openModal.addEventListener('click',openSheet);
    closeModal.addEventListener('click',closeSheet);
    overlay.addEventListener('click',e=>{if(e.target===overlay)closeSheet()});
    document.addEventListener('keydown',e=>{if(e.key==='Escape'&&overlay.classList.contains('active'))closeSheet()});

    /* === FORMAGA TEGISHLI YANGI QISM (mobil-friendly maska) === */
    const form       = document.getElementById('regForm');
    const nameInput  = document.getElementById('name');
    const phoneInput = document.getElementById('phone');
    const submitBtn  = document.getElementById('submitBtn');
    const successBox = document.getElementById('successBox');

    // +998 XX XXX XX XX format
    const phoneRegex = /^\+998 \d{2} \d{3} \d{2} \d{2}$/;

    function formatPhone(raw){
      let digits = (raw || '').replace(/\D/g,'');
      if(digits.startsWith('998')) digits = digits.slice(3); // +998 ni o'zimiz qo'yamiz
      digits = digits.slice(0,9); // XX XXX XX XX = 9 ta raqam
      let out = '+998 ';
      if(digits.length>0) out += digits.slice(0,2);
      if(digits.length>=3) out += ' ' + digits.slice(2,5);
      if(digits.length>=6) out += ' ' + digits.slice(5,7);
      if(digits.length>=8) out += ' ' + digits.slice(7,9);
      return out.trim();
    }

    function setCaretToEnd(el){
      try{
        const len = el.value.length;
        el.setSelectionRange(len,len);
      }catch(_){}
    }

    phoneInput.addEventListener('focus', () => {
      if (phoneInput.value.trim() === '') phoneInput.value = '+998 ';
      requestAnimationFrame(()=>setCaretToEnd(phoneInput));
    });

    // Prefiksni himoya qilish va faqat raqam kiritish (mobil uchun xam)
    phoneInput.addEventListener('beforeinput', (e) => {
      const start = phoneInput.selectionStart ?? 0;

      // Prefiksdan oldin o'chirishni taqiqlaymiz
      if (e.inputType && e.inputType.startsWith('delete')) {
        if (start <= 5) e.preventDefault();
        return;
      }

      // Faqat raqamga ruxsat (paste, typing — hammasi)
      if (typeof e.data === 'string' && e.data.length>0) {
        if (!/^\d+$/.test(e.data)) {
          e.preventDefault();
          return;
        }
      }
    });

    // Har qanday o'zgarishda formatlash
    function refreshPhoneUI(){
      const val = phoneInput.value;
      phoneInput.value = formatPhone(val);
      const full = phoneRegex.test(phoneInput.value.trim());
      phoneInput.style.borderColor = full ? '' : '#d80000';
      submitBtn.disabled = !full;
    }
    phoneInput.addEventListener('input', () => {
      const oldLen = phoneInput.value.length;
      refreshPhoneUI();
      // Kursorni oxirga qo'yib yuboramiz — mobil uchun qulay
      setCaretToEnd(phoneInput);
    });

    // Enter bosilganda ham tekshirish
    phoneInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && !phoneRegex.test(phoneInput.value.trim())) {
        e.preventDefault();
      }
      // Prefiksdan orqaga Backspace/Del — himoya
      if ((e.key === 'Backspace' || e.key === 'Delete') && (phoneInput.selectionStart ?? 0) <= 5) {
        e.preventDefault();
      }
    });

    // Yuborish: to‘liq bo‘lsa formani yashiramiz va "yuborildi" xabarini ko‘rsatamiz
    form.addEventListener('submit',e=>{
      e.preventDefault();

      const name = nameInput.value.trim();
      const full = phoneRegex.test(phoneInput.value.trim());

      if(!name){ nameInput.focus(); return; }
      if(!full){ refreshPhoneUI(); phoneInput.focus(); return; }

      // Demo: formani tozalash va "yuborildi" holatini chiqarish
      form.style.display = 'none';
      successBox.classList.add('active');

      setTimeout(()=>{
        successBox.classList.remove('active');
        form.reset();
        submitBtn.disabled = true;
        phoneInput.value = '';
        form.style.display = '';
        closeSheet();
      }, 2500);
    });
  </script
 

</body>
</html>


